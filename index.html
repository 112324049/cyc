<!DOCTYPE html>
<html>
<head>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<style>
  body { font-family: 'Noto Sans TC', sans-serif; background-color: #f4f7f9; }
  #app { max-width: 800px; margin: 20px auto; background: white; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); overflow: hidden; }
  .tabs { display: flex; border-bottom: 2px solid #eee; }
  .tab-button { flex: 1; padding: 15px 0; text-align: center; cursor: pointer; font-size: 16px; font-weight: 600; color: #555; transition: all 0.3s; }
  .tab-button.active { color: #007bff; border-bottom: 3px solid #007bff; }
  .tab-content { padding: 25px; }
  h2 { color: #007bff; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; margin-top: 0; margin-bottom: 20px; font-size: 22px; }
  h3 { color: #333; margin-top: 25px; margin-bottom: 15px; font-size: 18px; border-left: 4px solid #007bff; padding-left: 10px; }
  ul { list-style: none; padding: 0; }
  li { padding: 15px; border-radius: 8px; background-color: #f9f9f9; margin-bottom: 10px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); }
  .flight-info, .train-info { display: flex; justify-content: space-between; align-items: center; font-size: 15px; }
  .flight-details { flex-grow: 1; padding-right: 20px; }
  .flight-type { font-weight: bold; color: #007bff; margin-bottom: 5px; font-size: 14px; }
  .route { font-size: 18px; font-weight: 700; color: #333; }
  .route span { font-weight: normal; font-size: 14px; color: #777; margin-left: 10px; }
  .times { margin-top: 5px; color: #555; }
  .code { background-color: #e9ecef; padding: 5px 10px; border-radius: 5px; font-weight: 600; font-size: 14px; white-space: nowrap; }
  .notes { margin-top: 8px; font-size: 13px; color: #e74c3c; border-top: 1px dashed #ddd; padding-top: 5px; }
  .jr-link { margin-top: 20px; padding: 15px; background-color: #e6f7ff; border: 1px solid #b3e0ff; border-radius: 8px; }
  .jr-link a { color: #0056b3; font-weight: 600; text-decoration: none; word-break: break-all; }
  .jr-link p { margin: 0 0 5px 0; font-weight: 700; color: #007bff; font-size: 16px; }

  /* Specific styles for the "截圖 2025-12-07 凌晨3.38.32.jpg" file */
  .store-info { display: flex; align-items: flex-start; margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; background-color: #fefefe; }
  .store-image { width: 150px; height: 100px; object-fit: cover; margin-right: 15px; border-radius: 6px; }
  .store-details { flex-grow: 1; }
  .store-name { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px; }
  .store-rating { color: #f39c12; margin-bottom: 5px; font-size: 14px; }
  .store-address { font-size: 14px; color: #555; margin-bottom: 5px; }
  .store-hours { font-size: 14px; color: #2ecc71; font-weight: 600; }

  /* Styles for the Firebase data snippet */
  .expense-data { background-color: #f7f7f7; padding: 15px; border: 1px solid #ccc; border-radius: 8px; font-family: monospace; white-space: pre-wrap; margin-bottom: 20px; }
</style>
</head>
<body>

<div id="app">
  <div class="tabs">
    <div :class="['tab-button', { active: activeTab === 'info' }]" @click="activeTab = 'info'">資訊</div>
    <div :class="['tab-button', { active: activeTab === 'map' }]" @click="activeTab = 'map'">地圖</div>
    <div :class="['tab-button', { active: activeTab === 'schedule' }]" @click="activeTab = 'schedule'">行程</div>
    <div :class="['tab-button', { active: activeTab === 'error' }]" @click="activeTab = 'error'">錯誤</div>
    <div :class="['tab-button', { active: activeTab === 'expense' }]" @click="activeTab = 'expense'">支出</div>
  </div>

  <div class="tab-content" v-if="activeTab === 'info'">
    <h2>行程資訊</h2>

    <h3>餐飲推薦</h3>
    <div class="store-info">
        <img src="截圖 2025-12-07 凌晨3.38.32.jpg" alt="井出商店外觀" class="store-image">
        <div class="store-details">
            <div class="store-name">井出商店</div>
            <div class="store-rating">★★★★☆ (3.8) · 約 ¥1,000</div>
            <div class="store-address">日本 〒640-8329 Wakayama, Tamamachi, 4 Chome−8−4</div>
            <div class="store-hours">已開始營業: 開門營業時間: 11:30</div>
            <p style="font-size: 14px; margin-top: 10px; color: #777;">**備註:** 這是一間在和歌山的拉麵店，以濃郁的豚骨醬油湯底聞名。</p>
        </div>
    </div>

    <h3>交通</h3>
    <ul>
      <li v-for="flight in flights" :key="flight.code">
        <div class="flight-info">
          <div class="flight-details">
            <div class="flight-type">{{ flight.type }}</div>
            <div class="route">{{ flight.dep }} → {{ flight.arr }} <span>(列車/航班: {{ flight.code }})</span></div>
            <div class="times">
              出發: {{ flight.depTime }} &nbsp; | &nbsp; 抵達: {{ flight.arrTime }} &nbsp; | &nbsp; 總時長: {{ flight.duration }}
            </div>
            <div v-if="flight.notes" class="notes">{{ flight.notes }}</div>
          </div>
        </div>
      </li>
    </ul>

    <div class="jr-link">
        <p>JR訂票官網 (交通)</p>
        <a href="https://www.westjr.co.jp/global/tc/ticket/overview/" target="_blank">JR-WEST ONLINE TRAIN RESERVATION (繁體中文)</a>
    </div>

    <h3>其他景點</h3>
    <ul>
      <li>沖之神居 (Okinoshima Shrine Torii Gate) - 位於水中的紅色鳥居。</li>
    </ul>

  </div>

  <div class="tab-content" v-if="activeTab === 'map'">
    <h2>地圖</h2>
    <p>顯示地圖截圖: **截圖 2025-12-07 凌晨3.38.32.jpg** (井出商店位置)</p>
    <p>地圖資訊提供井出商店（和歌山縣玉町）的確切位置，您可以透過地圖確認其周邊環境。</p>
  </div>

  <div class="tab-content" v-if="activeTab === 'schedule'">
    <h2>六日遊行程更新</h2>
    <p>您的六日遊行程已確認並更新了 **Day 2** 和 **Day 3** 的交通細節：</p>
    <ul>
      <li>
        <span style="font-weight: bold;">Day 2: 3/1 (日) 和歌山 → 白濱</span>
        <ul>
          <li>選擇班次: **B 班次 (くろしお3號)**</li>
          <li>離開 (和歌山站): **10:06**</li>
          <li>抵達 (白濱站): **11:37**</li>
          <li>乘車時間: **1 小時 31 分**</li>
          <li>車資: **每人約 ¥3,740 (指定席)**</li>
        </ul>
      </li>
      <li>
        <span style="font-weight: bold;">Day 3: 3/2 (日) 白濱 → 大阪天王寺</span>
        <ul>
          <li>選擇班次: **C 班次 (くろしお16號)**</li>
          <li>離開 (白濱站): **10:26**</li>
          <li>抵達 (天王寺站): **12:33**</li>
          <li>乘車時間: **2 小時 07 分**</li>
          <li>車資: **每人約 ¥5,380 (指定席)**</li>
        </ul>
      </li>
    </ul>
    <p>您已選擇 C 班次，將於中午抵達大阪天王寺。</p>
  </div>

  <div class="tab-content" v-if="activeTab === 'error'">
    <h2>錯誤紀錄</h2>
    <p>根據您的截圖，紀錄到一個運行時錯誤：</p>
    <div style="background-color: #ffebeb; padding: 15px; border: 1px solid #e74c3c; border-radius: 8px;">
      <p style="color: #e74c3c; font-weight: bold; margin-top: 0;">發生錯誤</p>
      <p style="margin: 0; font-family: monospace;">TypeError: undefined is not an object (evaluating 'tripTotalcurrentDayIndex.theme')</p>
      <p style="margin: 0; font-size: 12px; color: #777;">行數: 2561</p>
    </div>
    <p>這個錯誤表示您的程式碼在嘗試存取一個未定義物件 (undefined) 的 `theme` 屬性。通常需要檢查 `tripTotalcurrentDayIndex` 變數在第 2561 行執行時是否已經被正確初始化。</p>
  </div>

  <div class="tab-content" v-if="activeTab === 'expense'">
    <h2>Firebase 支出紀錄</h2>
    <p>以下是從 Firebase Firestore 資料庫中截取的一條支出紀錄：</p>
    <div class="expense-data">
      <p style="margin-top: 0; font-weight: bold; color: #007bff;">Collection: expenses</p>
      <p style="font-weight: bold; color: #007bff;">Document ID: ZMLKWfdcTtaXjYFAQEL</p>
      <p>amount: 10</p>
      <p>category: "other"</p>
      <p>createdAt: 2025年12月7日凌晨12:19:07 [UTC+8]</p>
      <p>item: "測試"</p>
    </div>
    <p>這是一筆金額為 **10**，類別為 **other**，項目名稱為 **測試** 的支出紀錄。</p>
  </div>
</div>

<script>
  const { ref, createApp } = Vue

  createApp({
    setup() {
      const activeTab = ref('info')
      const flights = ref([
        { type: "去程", code: "GK50", dep: "TPE 台北", arr: "KIX 大阪", depTime: "02:30", arrTime: "06:00", duration: "2h 30m" },
        { type: "交通 (Day 2)", code: "くろしお3號", dep: "和歌山站", arr: "白濱站", depTime: "10:06", arrTime: "11:37", duration: "1h 31m", notes: "每人約 ¥3,740 (指定席)" },
        { type: "交通 (Day 3)", code: "くろしお16號", dep: "白濱站", arr: "天王寺站", depTime: "10:26", arrTime: "12:33", duration: "2h 07m", notes: "每人約 ¥5,380 (指定席)" },
        { type: "回程", code: "GK51", dep: "KIX 大阪", arr: "TPE 台北", depTime: "23:10", arrTime: "01:30+1", duration: "3h 20m" }
      ])
      
      return {
        activeTab,
        flights
      }
    }
  }).mount('#app')
</script>

</body>
</html>
